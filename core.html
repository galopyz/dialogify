<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="Core functions for dialogify">

<title>core – dialogify</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-000f0825b9c55ed21d14970d810c14a9.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="core – dialogify">
<meta property="og:description" content="Core functions for dialogify">
<meta property="og:site_name" content="dialogify">
<meta name="twitter:title" content="core – dialogify">
<meta name="twitter:description" content="Core functions for dialogify">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-sidebar floating nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">dialogify</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./core.html">core</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">dialogify</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./core.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">core</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#some-helpful-utilities" id="toc-some-helpful-utilities" class="nav-link" data-scroll-target="#some-helpful-utilities">Some helpful utilities</a>
  <ul class="collapse">
  <li><a href="#get_main" id="toc-get_main" class="nav-link" data-scroll-target="#get_main">get_main</a></li>
  <li><a href="#clean_txt" id="toc-clean_txt" class="nav-link" data-scroll-target="#clean_txt">clean_txt</a></li>
  <li><a href="#get_title" id="toc-get_title" class="nav-link" data-scroll-target="#get_title">get_title</a></li>
  <li><a href="#get_sections" id="toc-get_sections" class="nav-link" data-scroll-target="#get_sections">get_sections</a></li>
  <li><a href="#preview_msgs" id="toc-preview_msgs" class="nav-link" data-scroll-target="#preview_msgs">preview_msgs</a></li>
  <li><a href="#html_to_md" id="toc-html_to_md" class="nav-link" data-scroll-target="#html_to_md">html_to_md</a></li>
  <li><a href="#html_to_md_children" id="toc-html_to_md_children" class="nav-link" data-scroll-target="#html_to_md_children">html_to_md_children</a></li>
  </ul></li>
  <li><a href="#soup-to-msg_type-el" id="toc-soup-to-msg_type-el" class="nav-link" data-scroll-target="#soup-to-msg_type-el"><code>soup</code> to <code>(msg_type, el)</code></a>
  <ul class="collapse">
  <li><a href="#has_cls" id="toc-has_cls" class="nav-link" data-scroll-target="#has_cls">has_cls</a></li>
  <li><a href="#get_msg_type" id="toc-get_msg_type" class="nav-link" data-scroll-target="#get_msg_type">get_msg_type</a></li>
  <li><a href="#collect_msgs" id="toc-collect_msgs" class="nav-link" data-scroll-target="#collect_msgs">collect_msgs</a></li>
  <li><a href="#format_msg" id="toc-format_msg" class="nav-link" data-scroll-target="#format_msg">format_msg</a></li>
  <li><a href="#table_to_md" id="toc-table_to_md" class="nav-link" data-scroll-target="#table_to_md">table_to_md</a></li>
  <li><a href="#merge_dt" id="toc-merge_dt" class="nav-link" data-scroll-target="#merge_dt">merge_dt</a></li>
  <li><a href="#format_msgs" id="toc-format_msgs" class="nav-link" data-scroll-target="#format_msgs">format_msgs</a></li>
  <li><a href="#create_msgs" id="toc-create_msgs" class="nav-link" data-scroll-target="#create_msgs">create_msgs</a></li>
  <li><a href="#mk_dialog" id="toc-mk_dialog" class="nav-link" data-scroll-target="#mk_dialog">mk_dialog</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/galopyz/dialogify/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div><div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="core.html.md"><i class="bi bi-file-code"></i>CommonMark</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">core</h1>
</div>

<div>
  <div class="description">
    Core functions for dialogify
  </div>
</div>


<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p><a href="https://docs.python.org/3/library/index.html">The Python Standard Library</a> documentation is very helpful for learning Python. So is <a href="https://solve.it.com/">Solveit</a>! Solveit is jupyter notebook + AI with superpowers. Learning programming is so much fun and productive with AI. Therefore, I wanted to convert these html python documentation pages into solveit dialogues, which comprise small pieces of notes and code messages with appropriate headings, which can be extracted from the pages’ table of contents.</p>
<p>How it works:</p>
<ul>
<li>We first get the html from the python documentation web page.</li>
<li>We turn it into <code>(msg_type, element)</code> where <code>msg_type</code> is <code>note</code> or <code>code</code> and <code>element</code> is soup element.</li>
<li>Turn <code>element</code>s into appropriate solveit messages for the dialog.</li>
</ul>
<p>The goal is to use <code>#</code> for the title, <code>##</code> for subheading, and <code>###</code> for each function definition from the docs.</p>
<p>First, we grab html from the documentation and create <code>soup</code>.</p>
<div id="2dfd303e" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>doc_url <span class="op">=</span> <span class="st">'https://docs.python.org/3/library/random.html'</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>doc_html <span class="op">=</span> httpx.get(doc_url).text</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>doc_html[:<span class="dv">600</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>'&lt;!DOCTYPE html&gt;\n\n&lt;html lang="en" data-content_root="../"&gt;\n  &lt;head&gt;\n    &lt;meta charset="utf-8" /&gt;\n    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0" /&gt;&lt;meta name="viewport" content="width=device-width, initial-scale=1" /&gt;\n&lt;meta property="og:title" content="random — Generate pseudo-random numbers" /&gt;\n&lt;meta property="og:type" content="website" /&gt;\n&lt;meta property="og:url" content="https://docs.python.org/3/library/random.html" /&gt;\n&lt;meta property="og:site_name" content="Python documentation" /&gt;\n&lt;meta property="og:description" content="Source code: Lib/random.py This module imple'</code></pre>
</div>
</div>
<div id="b35e8315" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(doc_html, <span class="st">'html.parser'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="some-helpful-utilities" class="level2">
<h2 class="anchored" data-anchor-id="some-helpful-utilities">Some helpful utilities</h2>
<p>Here are some utility functions for getting the main content, cleaning text, getting title, etc.</p>
<hr>
<p><a href="https://github.com/galopyz/dialogify/blob/main/dialogify/core.py#L23" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="get_main" class="level3">
<h3 class="anchored" data-anchor-id="get_main">get_main</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_main(</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    soup</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Extract the main content section from Python docs soup</em></p>
<div id="c628412e" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>ms <span class="op">=</span> get_main(soup)<span class="op">;</span> <span class="bu">str</span>(ms)[:<span class="dv">300</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>'&lt;section id="module-random"&gt;\n&lt;span id="random-generate-pseudo-random-numbers"&gt;&lt;/span&gt;&lt;h1&gt;&lt;code class="xref py py-mod docutils literal notranslate"&gt;&lt;span class="pre"&gt;random&lt;/span&gt;&lt;/code&gt; — Generate pseudo-random numbers&lt;a class="headerlink" href="#module-random" title="Link to this heading"&gt;¶&lt;/a&gt;&lt;/h1'</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/galopyz/dialogify/blob/main/dialogify/core.py#L28" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="clean_txt" class="level3">
<h3 class="anchored" data-anchor-id="clean_txt">clean_txt</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> clean_txt(</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    el</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Clean element text by removing paragraph signs and extra whitespace</em></p>
<hr>
<p><a href="https://github.com/galopyz/dialogify/blob/main/dialogify/core.py#L33" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="get_title" class="level3">
<h3 class="anchored" data-anchor-id="get_title">get_title</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_title(</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    section</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Extract the h1 title from a section</em></p>
<div id="1ba622a8" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>get_title(ms)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>'random — Generate pseudo-random numbers'</code></pre>
</div>
</div>
<p>Before turning the <code>soup</code> into markdown, we turn these into each sections as in <code>(title, section)</code> tuples.</p>
<hr>
<p><a href="https://github.com/galopyz/dialogify/blob/main/dialogify/core.py#L38" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="get_sections" class="level3">
<h3 class="anchored" data-anchor-id="get_sections">get_sections</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_sections(</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    main</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Get all direct child sections as (title, section_element) tuples</em></p>
<div id="23a5528b" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(get_sections(ms))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>12</code></pre>
</div>
</div>
<p>We can grab sections and grab the bookkeeping section</p>
<div id="b6c4a998" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>sts <span class="op">=</span> get_sections(ms)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>bk <span class="op">=</span> sts[<span class="dv">0</span>][<span class="dv">1</span>]</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="bu">str</span>(bk)[:<span class="dv">300</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>'&lt;section id="bookkeeping-functions"&gt;\n&lt;h2&gt;Bookkeeping functions&lt;a class="headerlink" href="#bookkeeping-functions" title="Link to this heading"&gt;¶&lt;/a&gt;&lt;/h2&gt;\n&lt;dl class="py function"&gt;\n&lt;dt class="sig sig-object py" id="random.seed"&gt;\n&lt;span class="sig-prename descclassname"&gt;&lt;span class="pre"&gt;random.&lt;/span&gt;&lt;'</code></pre>
</div>
</div>
<p>Looking at the preview to check if it is looking good.</p>
<hr>
<p><a href="https://github.com/galopyz/dialogify/blob/main/dialogify/core.py#L43" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="preview_msgs" class="level3">
<h3 class="anchored">preview_msgs</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> preview_msgs(</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    msgs</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Preview message tuples as rendered markdown</em></p>
<div id="6835ef0a" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>preview_msgs(get_sections(ms)[:<span class="dv">2</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<p><strong>[Bookkeeping functions]</strong></p>
<section id="bookkeeping-functions">
<h2 class="anchored" data-anchor-id="preview_msgs">
Bookkeeping functions<a class="headerlink" href="#bookkeeping-functions" title="Link to this heading">¶</a>
</h2>
<dl class="py function">
<dt class="sig sig-object py" id="random.seed">
<span class="sig-prename descclassname"><span class="pre">random.</span></span><span class="sig-name descname"><span class="pre">seed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#random.seed" title="Link to this definition">¶</a>
</dt>
<dd>
<p>
Initialize the random number generator.
</p>
<p>
If <em>a</em> is omitted or <code class="docutils literal notranslate"><span class="pre">None</span></code>, the current system time is used. If randomness sources are provided by the operating system, they are used instead of the system time (see the <a class="reference internal" href="os.html#os.urandom" title="os.urandom"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.urandom()</span></code></a> function for details on availability).
</p>
<p>
If <em>a</em> is an int, its absolute value is used directly.
</p>
<p>
With version 2 (the default), a <a class="reference internal" href="stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference internal" href="stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>, or <a class="reference internal" href="stdtypes.html#bytearray" title="bytearray"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytearray</span></code></a> object gets converted to an <a class="reference internal" href="functions.html#int" title="int"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a> and all of its bits are used.
</p>
<p>
With version 1 (provided for reproducing random sequences from older versions of Python), the algorithm for <a class="reference internal" href="stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> and <a class="reference internal" href="stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> generates a narrower range of seeds.
</p>
<div class="versionchanged">
<p>
<span class="versionmodified changed">Changed in version 3.2: </span>Moved to the version 2 scheme which uses all of the bits in a string seed.
</p>
</div>
<div class="versionchanged">
<p>
<span class="versionmodified changed">Changed in version 3.11: </span>The <em>seed</em> must be one of the following types: <code class="docutils literal notranslate"><span class="pre">None</span></code>, <a class="reference internal" href="functions.html#int" title="int"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>, <a class="reference internal" href="functions.html#float" title="float"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>, <a class="reference internal" href="stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference internal" href="stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>, or <a class="reference internal" href="stdtypes.html#bytearray" title="bytearray"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytearray</span></code></a>.
</p>
</div>
</dd>
</dl>
<dl class="py function">
<dt class="sig sig-object py" id="random.getstate">
<span class="sig-prename descclassname"><span class="pre">random.</span></span><span class="sig-name descname"><span class="pre">getstate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#random.getstate" title="Link to this definition">¶</a>
</dt>
<dd>
<p>
Return an object capturing the current internal state of the generator. This object can be passed to <a class="reference internal" href="#random.setstate" title="random.setstate"><code class="xref py py-func docutils literal notranslate"><span class="pre">setstate()</span></code></a> to restore the state.
</p>
</dd>
</dl>
<dl class="py function">
<dt class="sig sig-object py" id="random.setstate">
<span class="sig-prename descclassname"><span class="pre">random.</span></span><span class="sig-name descname"><span class="pre">setstate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#random.setstate" title="Link to this definition">¶</a>
</dt>
<dd>
<p>
<em>state</em> should have been obtained from a previous call to <a class="reference internal" href="#random.getstate" title="random.getstate"><code class="xref py py-func docutils literal notranslate"><span class="pre">getstate()</span></code></a>, and <a class="reference internal" href="#random.setstate" title="random.setstate"><code class="xref py py-func docutils literal notranslate"><span class="pre">setstate()</span></code></a> restores the internal state of the generator to what it was at the time <a class="reference internal" href="#random.getstate" title="random.getstate"><code class="xref py py-func docutils literal notranslate"><span class="pre">getstate()</span></code></a> was called.
</p>
</dd>
</dl>
</section>
</div>
<div class="cell-output cell-output-display cell-output-markdown">
<p><strong>[Functions for bytes]</strong></p>
<section id="functions-for-bytes">
<h2 class="anchored">
Functions for bytes<a class="headerlink" href="#functions-for-bytes" title="Link to this heading">¶</a>
</h2>
<dl class="py function">
<dt class="sig sig-object py" id="random.randbytes">
<span class="sig-prename descclassname"><span class="pre">random.</span></span><span class="sig-name descname"><span class="pre">randbytes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#random.randbytes" title="Link to this definition">¶</a>
</dt>
<dd>
<p>
Generate <em>n</em> random bytes.
</p>
<p>
This method should not be used for generating security tokens. Use <a class="reference internal" href="secrets.html#secrets.token_bytes" title="secrets.token_bytes"><code class="xref py py-func docutils literal notranslate"><span class="pre">secrets.token_bytes()</span></code></a> instead.
</p>
<div class="versionadded">
<p>
<span class="versionmodified added">Added in version 3.9.</span>
</p>
</div>
</dd>
</dl>
</section>
</div>
</div>
<p><a href="https://galopyz.github.io/dialogify/core.html#html_to_md"><code>html_to_md</code></a> turns html into md for appropriate tags.</p>
<hr>
<p><a href="https://github.com/galopyz/dialogify/blob/main/dialogify/core.py#L49" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="html_to_md" class="level3">
<h3 class="anchored" data-anchor-id="html_to_md">html_to_md</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> html_to_md(</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    el, in_link:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Recursively convert HTML element to markdown string</em></p>
<hr>
<p><a href="https://github.com/galopyz/dialogify/blob/main/dialogify/core.py#L64" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="html_to_md_children" class="level3">
<h3 class="anchored" data-anchor-id="html_to_md_children">html_to_md_children</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> html_to_md_children(</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    el, in_link:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Convert all children of an HTML element to markdown</em></p>
<div id="3aa7f8f1" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(html_to_md(bk))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Bookkeeping functions[¶](#bookkeeping-functions)


random.seed(*a=None*, *version=2*)[¶](#random.seed)
Initialize the random number generator.
If *a* is omitted or `None`, the current system time is used.  If
randomness sources are provided by the operating system, they are used
instead of the system time (see the [os.urandom()](os.html#os.urandom) function for details
on availability).
If *a* is an int, its absolute value is used directly.
With version 2 (the default), a [str](stdtypes.html#str), [bytes](stdtypes.html#bytes), or [bytearray](stdtypes.html#bytearray)
object gets converted to an [int](functions.html#int) and all of its bits are used.
With version 1 (provided for reproducing random sequences from older versions
of Python), the algorithm for [str](stdtypes.html#str) and [bytes](stdtypes.html#bytes) generates a
narrower range of seeds.

Changed in version 3.2: Moved to the version 2 scheme which uses all of the bits in a string seed.


Changed in version 3.11: The *seed* must be one of the following types:
`None`, [int](functions.html#int), [float](functions.html#float), [str](stdtypes.html#str),
[bytes](stdtypes.html#bytes), or [bytearray](stdtypes.html#bytearray).




random.getstate()[¶](#random.getstate)
Return an object capturing the current internal state of the generator.  This
object can be passed to [setstate()](#random.setstate) to restore the state.



random.setstate(*state*)[¶](#random.setstate)
*state* should have been obtained from a previous call to [getstate()](#random.getstate), and
[setstate()](#random.setstate) restores the internal state of the generator to what it was at
the time [getstate()](#random.getstate) was called.

</code></pre>
</div>
</div>
</section>
</section>
<section id="soup-to-msg_type-el" class="level2">
<h2 class="anchored" data-anchor-id="soup-to-msg_type-el"><code>soup</code> to <code>(msg_type, el)</code></h2>
<p>Solveit messages have <code>Code</code>, <code>Note</code>, <code>Prompt</code>, and <code>Raw</code> for message types. But we want to focus on <code>note</code> and <code>code</code> for creating dialogs. By turning <code>soup</code> into <code>(msg_type, el)</code>, we can easily turn those into sovleit messages with markdown.</p>
<hr>
<p><a href="https://github.com/galopyz/dialogify/blob/main/dialogify/core.py#L69" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="has_cls" class="level3">
<h3 class="anchored" data-anchor-id="has_cls">has_cls</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> has_cls(</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    el, cls</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Check if element has a specific CSS class</em></p>
<p><code>dt</code> is special because it is used for function definition in python docs.</p>
<hr>
<p><a href="https://github.com/galopyz/dialogify/blob/main/dialogify/core.py#L74" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="get_msg_type" class="level3">
<h3 class="anchored" data-anchor-id="get_msg_type">get_msg_type</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_msg_type(</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    el</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Determine message type (‘note’, ‘code’, or ‘dt’) for an HTML element</em></p>
<hr>
<p><a href="https://github.com/galopyz/dialogify/blob/main/dialogify/core.py#L87" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="collect_msgs" class="level3">
<h3 class="anchored" data-anchor-id="collect_msgs">collect_msgs</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> collect_msgs(</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    el</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Recursively collect (msg_type, element) tuples from HTML tree</em></p>
<hr>
<p><a href="https://github.com/galopyz/dialogify/blob/main/dialogify/core.py#L98" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="format_msg" class="level3">
<h3 class="anchored" data-anchor-id="format_msg">format_msg</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> format_msg(</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    msg_type, el</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Convert (msg_type, element) tuple to (msg_type, markdown_string)</em></p>
<hr>
<p><a href="https://github.com/galopyz/dialogify/blob/main/dialogify/core.py#L113" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="table_to_md" class="level3">
<h3 class="anchored" data-anchor-id="table_to_md">table_to_md</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> table_to_md(</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    table</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Convert HTML table to markdown format</em></p>
<p>Some functions/classes on the doc has multiple signatures. In this case, <code>dt</code>s need to be merged into a single message as a heading.</p>
<hr>
<p><a href="https://github.com/galopyz/dialogify/blob/main/dialogify/core.py#L125" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="merge_dt" class="level3">
<h3 class="anchored" data-anchor-id="merge_dt">merge_dt</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> merge_dt(</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    msgs</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Merge consecutive ‘dt’ messages into single heading notes</em></p>
<hr>
<p><a href="https://github.com/galopyz/dialogify/blob/main/dialogify/core.py#L134" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="format_msgs" class="level3">
<h3 class="anchored" data-anchor-id="format_msgs">format_msgs</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> format_msgs(</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    el</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Convert HTML element to list of formatted (msg_type, markdown) tuples</em></p>
<p>Let’s try it on <code>bytearray</code> function from the “https://docs.python.org/3.12/library/functions.html”.</p>
<div id="95df8feb" class="cell" data-hide_input="true">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>bytearray_html <span class="op">=</span> <span class="st">'''&lt;dl class="py class" id="func-bytearray"&gt;</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;dt class="sig sig-object py"&gt;</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;em class="property"&gt;&lt;span class="k"&gt;&lt;span class="pre"&gt;class&lt;/span&gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;/em&gt;&lt;span class="sig-name descname"&gt;&lt;span class="pre"&gt;bytearray&lt;/span&gt;&lt;/span&gt;&lt;span class="sig-paren"&gt;(&lt;/span&gt;&lt;em class="sig-param"&gt;&lt;span class="n"&gt;&lt;span class="pre"&gt;source&lt;/span&gt;&lt;/span&gt;&lt;span class="o"&gt;&lt;span class="pre"&gt;=&lt;/span&gt;&lt;/span&gt;&lt;span class="default_value"&gt;&lt;span class="pre"&gt;b''&lt;/span&gt;&lt;/span&gt;&lt;/em&gt;&lt;span class="sig-paren"&gt;)&lt;/span&gt;&lt;/dt&gt;</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;dt class="sig sig-object py"&gt;</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;em class="property"&gt;&lt;span class="k"&gt;&lt;span class="pre"&gt;class&lt;/span&gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;/em&gt;&lt;span class="sig-name descname"&gt;&lt;span class="pre"&gt;bytearray&lt;/span&gt;&lt;/span&gt;&lt;span class="sig-paren"&gt;(&lt;/span&gt;&lt;em class="sig-param"&gt;&lt;span class="n"&gt;&lt;span class="pre"&gt;source&lt;/span&gt;&lt;/span&gt;&lt;/em&gt;, &lt;em class="sig-param"&gt;&lt;span class="n"&gt;&lt;span class="pre"&gt;encoding&lt;/span&gt;&lt;/span&gt;&lt;/em&gt;&lt;span class="sig-paren"&gt;)&lt;/span&gt;&lt;/dt&gt;</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;dt class="sig sig-object py"&gt;</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;em class="property"&gt;&lt;span class="k"&gt;&lt;span class="pre"&gt;class&lt;/span&gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;/em&gt;&lt;span class="sig-name descname"&gt;&lt;span class="pre"&gt;bytearray&lt;/span&gt;&lt;/span&gt;&lt;span class="sig-paren"&gt;(&lt;/span&gt;&lt;em class="sig-param"&gt;&lt;span class="n"&gt;&lt;span class="pre"&gt;source&lt;/span&gt;&lt;/span&gt;&lt;/em&gt;, &lt;em class="sig-param"&gt;&lt;span class="n"&gt;&lt;span class="pre"&gt;encoding&lt;/span&gt;&lt;/span&gt;&lt;/em&gt;, &lt;em class="sig-param"&gt;&lt;span class="n"&gt;&lt;span class="pre"&gt;errors&lt;/span&gt;&lt;/span&gt;&lt;/em&gt;&lt;span class="sig-paren"&gt;)&lt;/span&gt;&lt;/dt&gt;</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;dd&gt;&lt;p&gt;Return a new array of bytes.&lt;/p&gt;</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;p&gt;The optional &lt;em&gt;source&lt;/em&gt; parameter can be used to initialize the array:&lt;/p&gt;</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;ul class="simple"&gt;</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;li&gt;&lt;p&gt;If it is a &lt;em&gt;string&lt;/em&gt;, you must also give the &lt;em&gt;encoding&lt;/em&gt;.&lt;/p&gt;&lt;/li&gt;</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;li&gt;&lt;p&gt;If it is an &lt;em&gt;integer&lt;/em&gt;, the array will have that size.&lt;/p&gt;&lt;/li&gt;</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;/ul&gt;</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;p&gt;Without an argument, an array of size 0 is created.&lt;/p&gt;</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;/dd&gt;&lt;/dl&gt;'''</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="3767a50b" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>ba_soup <span class="op">=</span> BeautifulSoup(bytearray_html, <span class="st">'html.parser'</span>)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>preview_msgs(collect_msgs(ba_soup.dl))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<p><strong>[dt]</strong></p>
<dt class="sig sig-object py">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">bytearray</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">b’’</span></span></em><span class="sig-paren">)</span>
</dt>
</div>
<div class="cell-output cell-output-display cell-output-markdown">
<p><strong>[dt]</strong></p>
<dt class="sig sig-object py">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">bytearray</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span></em><span class="sig-paren">)</span>
</dt>
</div>
<div class="cell-output cell-output-display cell-output-markdown">
<p><strong>[dt]</strong></p>
<dt class="sig sig-object py">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">bytearray</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">errors</span></span></em><span class="sig-paren">)</span>
</dt>
</div>
<div class="cell-output cell-output-display cell-output-markdown">
<p><strong>[note]</strong></p>
<p>
Return a new array of bytes.
</p>
</div>
<div class="cell-output cell-output-display cell-output-markdown">
<p><strong>[note]</strong></p>
<p>
The optional <em>source</em> parameter can be used to initialize the array:
</p>
</div>
<div class="cell-output cell-output-display cell-output-markdown">
<p><strong>[note]</strong></p>
<ul class="simple">
<li>
<p>
If it is a <em>string</em>, you must also give the <em>encoding</em>.
</p>
</li>
<li>
<p>
If it is an <em>integer</em>, the array will have that size.
</p>
</li>
</ul>
</div>
<div class="cell-output cell-output-display cell-output-markdown">
<p><strong>[note]</strong></p>
<p>
Without an argument, an array of size 0 is created.
</p>
</div>
</div>
<div id="efbf6279" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>ba_msgs <span class="op">=</span> format_msgs(ba_soup)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>ba_msgs</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[('note',
  "### `class bytearray(source=b'')`\n### `class bytearray(source, encoding)`\n### `class bytearray(source, encoding, errors)`"),
 ('note', 'Return a new array of bytes.'),
 ('note',
  'The optional *source* parameter can be used to initialize the array:'),
 ('note',
  '\n- If it is a *string*, you must also give the *encoding*.\n- If it is an *integer*, the array will have that size.\n'),
 ('note', 'Without an argument, an array of size 0 is created.')]</code></pre>
</div>
</div>
<div id="47bc34e3" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>merge_dt(ba_msgs)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[('note',
  "### `class bytearray(source=b'')`\n### `class bytearray(source, encoding)`\n### `class bytearray(source, encoding, errors)`"),
 ('note', 'Return a new array of bytes.'),
 ('note',
  'The optional *source* parameter can be used to initialize the array:'),
 ('note',
  '\n- If it is a *string*, you must also give the *encoding*.\n- If it is an *integer*, the array will have that size.\n'),
 ('note', 'Without an argument, an array of size 0 is created.')]</code></pre>
</div>
</div>
<div id="10680a9c" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>preview_msgs(format_msgs(ba_soup))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<p><strong>[note]</strong></p>
<section id="class-bytearraysourceb" class="level3">
<h3 class="anchored" data-anchor-id="class-bytearraysourceb"><code>class bytearray(source=b'')</code></h3>
</section>
<section id="class-bytearraysource-encoding" class="level3">
<h3 class="anchored" data-anchor-id="class-bytearraysource-encoding"><code>class bytearray(source, encoding)</code></h3>
</section>
<section id="class-bytearraysource-encoding-errors" class="level3">
<h3 class="anchored" data-anchor-id="class-bytearraysource-encoding-errors"><code>class bytearray(source, encoding, errors)</code></h3>
</section>
</div>
<div class="cell-output cell-output-display cell-output-markdown">
<p><strong>[note]</strong></p>
<p>Return a new array of bytes.</p>
</div>
<div class="cell-output cell-output-display cell-output-markdown">
<p><strong>[note]</strong></p>
<p>The optional <em>source</em> parameter can be used to initialize the array:</p>
</div>
<div class="cell-output cell-output-display cell-output-markdown">
<p><strong>[note]</strong></p>
<ul>
<li>If it is a <em>string</em>, you must also give the <em>encoding</em>.</li>
<li>If it is an <em>integer</em>, the array will have that size.</li>
</ul>
</div>
<div class="cell-output cell-output-display cell-output-markdown">
<p><strong>[note]</strong></p>
<p>Without an argument, an array of size 0 is created.</p>
</div>
</div>
<p>Looks good! We can use <code>create_msg</code> to create solveit messages.</p>
<hr>
<p><a href="https://github.com/galopyz/dialogify/blob/main/dialogify/core.py#L139" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="create_msgs" class="level3">
<h3 class="anchored" data-anchor-id="create_msgs">create_msgs</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> create_msgs(</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>    doc_tuples, dname:<span class="bu">str</span><span class="op">=</span><span class="st">''</span>, kwargs:VAR_KEYWORD</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Create solveit messages from list of (msg_type, content) tuples</em></p>
<div id="07124b30" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create_msgs(format_msgs(ms))</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>And we can make dialogs.</p>
<hr>
<p><a href="https://github.com/galopyz/dialogify/blob/main/dialogify/core.py#L144" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="mk_dialog" class="level3">
<h3 class="anchored" data-anchor-id="mk_dialog">mk_dialog</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> mk_dialog(</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>    url, dname:<span class="bu">str</span><span class="op">=</span><span class="st">''</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Fetch Python docs URL and create a solveit dialog from it</em></p>
<p>Here are examples to create solveit dialogs:</p>
<div id="7eaa4460" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mk_dialog('https://docs.python.org/3.12/library/functions.html', dname='dialogify/testing')</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="4852205e" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mk_dialog('https://docs.python.org/3.12/howto/regex.html#regex-howto', dname='dialogify/regex_howto')</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="86915bae" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mk_dialog('https://docs.python.org/3.12/howto/regex.html#regex-howto')</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/galopyz\.github\.io\/dialogify");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/galopyz/dialogify/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>